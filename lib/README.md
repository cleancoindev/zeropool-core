# ZeroPoolNetwork

## Description
ZeroPoolNetwork is a pure JavaScript library for iterating with ZeroPool Ethereum smart contract.

## Installation
todo

## Usage
```javascript
const zp = new ZeroPoolNetwork(contractAddress, ethPrivateKey, zpMnemonic);
```

### Deposit
```javascript
zp.deposit("0x0000000000000000000000000000000000000000", 10000002)
  .then(console.log)
  
/*
{ 
  deposit_blocknumber: 105,
  proof:
   [ 10618278091481595704348122510710872038636087287541195770304448240179433487922n,
     6820251732637745465222229593186089075846105382438918454582995391188310250557n,
     7977764039042320623077421308147012660708782524110320576507395364490330869445n,
     14953914461711728287547527200248050087041701094087376838307292254072088741940n,
     10460258403696081901780263923490850849732816570038643292297476947390988200706n,
     2718212615333563440564856193714672454221088851454469820813074089369347359171n,
     6789030152397715455983892498661851461827682830031328466936460904369117556271n,
     93232926217065064018980471662218186714626644362117158630381502078378084215n ],
  message1:
   [ 19042329244453370110898339843660190389989373460564000794295392891117279937833n,
     6701703612611537740033634303587792786233045263257223542047708984594501958898n,
     4502765180101631898944396485550403933458001779181488619404817317480060242672n,
     20578363314024645901478243055996495230838830878598425421289539242010094358932n ],
  message2:
   [ 13181868285613862887915925816963627993565093851737515661429695741209044531872n,
     14767233887671425842194198584424922539547194182969602793970424698396606394403n,
     15238398247937055560286424375738635418404127500824945360619249482836884226062n,
     34666902582085039256491828860506714807643371907628932397069673737056369511552n ],
  owner: '0x5c526bc400c619Ca631619F52C58545ad56a0F19',
  delta: 10000002n,
  token: '0x0000000000000000000000000000000000000000',
  utxo:
   [ 5927196335330132757957966971520035472662937622288203020448836932640305357500n,
     6675163126093257903099739234723449784990797034507726406515264335056294826463n ],
  nullifier:
   [ 15405626329718232127705544346089433941806776316312070447688218215139210550700n,
     14693442481534138816492462133958000852601574444227129873663807305026644958164n ],
  rootptr: 0,
  new_root:
   17970794380061284616596800972425971487597130002759127715876732862858270648168n 
}
*/
```

### My Deposits
```javascript
zp.myDeposits()
  .then(console.log)
  
/*
[ 
  { 
    deposit: { 
      token: '0x0000000000000000000000000000000000000000',
      amount: '10000002',
      txhash:
        '0x626b9a6681dae7ec6776d083f08c42fba7c0d1f68bbead511478235ca5afc257',
      owner: '0x5c526bc400c619Ca631619F52C58545ad56a0F19',
      blocknumber: 105 
    },
    isExists: true,
    isSpent: false,
    spentInTx: 0 
  } 
]
*/
```

### Cancel Deposit
```javascript
const deposit = { 
  token: '0x0000000000000000000000000000000000000000',
  amount: '10000002',
  txhash: '0x626b9a6681dae7ec6776d083f08c42fba7c0d1f68bbead511478235ca5afc257',
  owner: '0x5c526bc400c619Ca631619F52C58545ad56a0F19',
  blocknumber: 105 
}; 

zp.depositCancel(deposit)
  .then(console.log)
```

### Publish blocks
```javascript
const block = { 
  deposit_blocknumber: 105,
  proof:
   [ 10618278091481595704348122510710872038636087287541195770304448240179433487922n,
     6820251732637745465222229593186089075846105382438918454582995391188310250557n,
     7977764039042320623077421308147012660708782524110320576507395364490330869445n,
     14953914461711728287547527200248050087041701094087376838307292254072088741940n,
     10460258403696081901780263923490850849732816570038643292297476947390988200706n,
     2718212615333563440564856193714672454221088851454469820813074089369347359171n,
     6789030152397715455983892498661851461827682830031328466936460904369117556271n,
     93232926217065064018980471662218186714626644362117158630381502078378084215n ],
  message1:
   [ 19042329244453370110898339843660190389989373460564000794295392891117279937833n,
     6701703612611537740033634303587792786233045263257223542047708984594501958898n,
     4502765180101631898944396485550403933458001779181488619404817317480060242672n,
     20578363314024645901478243055996495230838830878598425421289539242010094358932n ],
  message2:
   [ 13181868285613862887915925816963627993565093851737515661429695741209044531872n,
     14767233887671425842194198584424922539547194182969602793970424698396606394403n,
     15238398247937055560286424375738635418404127500824945360619249482836884226062n,
     34666902582085039256491828860506714807643371907628932397069673737056369511552n ],
  owner: '0x5c526bc400c619Ca631619F52C58545ad56a0F19',
  delta: 10000002n,
  token: '0x0000000000000000000000000000000000000000',
  utxo:
   [ 5927196335330132757957966971520035472662937622288203020448836932640305357500n,
     6675163126093257903099739234723449784990797034507726406515264335056294826463n ],
  nullifier:
   [ 15405626329718232127705544346089433941806776316312070447688218215139210550700n,
     14693442481534138816492462133958000852601574444227129873663807305026644958164n ],
  rootptr: 0,
  new_root:
   17970794380061284616596800972425971487597130002759127715876732862858270648168n 
};

const blocks = [block];
const blocknumber_expires = 500;

zp.publishBlockItems(blocks, blocknumber_expires)
  .then(console.log)
```

### Find own UTXO
```javascript
zp.myUtxos()
  .then(console.log)
  
/*
[ 
  { token: 0n,
    amount: 10000002n,
    pubkey:
     12123946667276826336013985323462868612130966473467100169422703722373267055672n,
    blinding:
     18782047853899156349418357931391833619305251468979533390192400340875930082397n,
    mp_sibling:
     [ 6675163126093257903099739234723449784990797034507726406515264335056294826463n,
       9885323406998500013793438129556536303224276963647976814508482533349574357385n,
       17325516636655203304685357446470211555866789883064202373892151823301208051968n,
       15362496748596162224562673039646463735701166694902230246191366360084089741808n,
       3171421283011099678172213181064215781395844368275901880503819278767032266053n,
       811463681839953651777473541765908085536220022209428190504815069489494010885n,
       13064558374208152162708697998995611495305529433229206948157197076451175327959n,
       7311503910832266130755624400428811561405414443392140543102318211775248233362n,
       17002201217364759451217610853591697968986488295235380974427951403550807321707n,
       3500442693561461904038125704341979247251580107582557078642280160477539792818n,
       10501656479781836719197170875200353438080615205837812789201747535798868006609n,
       12914839239293365621585921068127683428941648179795690273965418411181646964415n,
       12492880136601929540904754914885001782263519525598738093563325262150635302360n,
       17936846559010455689227552817658893787011739602623722562423495781781027896246n,
       13121683564499582125450586031954700642263221699331733123771659586379936915090n,
       2151306395078888140082390342396672064177601520918049536222458442287316625149n,
       973981158916562824715210270245787078520087699511931306830353220473866989272n,
       12898540022437736719586872477129837513582070640020546314181205384805761992552n,
       10735091884781591299635655521928651084111810461354093711649475411912469649843n,
       13327530160302227271697984708670609451674249054901805775401956241509057418700n,
       15986313087792016329347698116251406749758077340959961537937482287420481099813n,
       21663645665006187845941287869331227818803254029633093035761111206856504590873n,
       6894123801651624732464317171894904979383696323335879951392387189806360479396n,
       3143742548657777282352720086119375615149853609086256306717859951072208904762n,
       11576922831286256560284620841077464395695347730830789665177223146385642313483n,
       19618776947554247327503805715555642544618369397629233982225982437668900848680n,
       2957506134981379138072587707549241847260360051372092991593286757652107999695n,
       5535857054133359989943183856109469945469070067054831224622465697587699586741n,
       21754553799146747998207416465892208719427900803102670069027925178357742398193n,
       19775312519358466453604956678080879392589515452908593006741652198244393197561n,
       13238170592610231769082643290569709711316545507151657257788487738181309369115n,
       414462044381848533880208748926423808039968765845791454432677987651222650587n ],
    mp_path: 0 
  } 
]
*/
```

### Get UTXO Root Hash
```javascript
zp.utxoRootHash()
  .then(console.log)
  
/*
17970794380061284616596800972425971487597130002759127715876732862858270648168n
*/
```
